install:
  - git submodule update --init --recursive
  - set QTDIR=C:\Qt\5.13.0\msvc2017_64
  - set PATH=%PATH%;%QTDIR%\bin
build_script:
  - find C:\Qt\5.13.0
  - qmake -config release -tp vc -spec win32-msvc2017 guitar-configurator.pro
  - windeployqt guitar-configurator.exe -qmldir=../
  - find

on_success:
  # find appdir -executable -type f -exec ldd {} \; | grep " => /usr" | cut -d " " -f 2-3 | sort | uniq # for debugging
  # curl --upload-file APPNAME*.AppImage https://transfer.sh/APPNAME-git.$(git rev-parse --short HEAD)-x86_64.AppImage
  - wget -c https://github.com/probonopd/uploadtool/raw/master/upload.sh
  - bash upload.sh Guitar_Configurator*.AppImage*
branches:
  except:    
  - /^(?i:continuous)/